<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Transcript Review</title>
  <link rel="stylesheet" href="theme.css"/>
  <link rel="stylesheet" href="transcripts.css"/>
  <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
</head>
<body>
<div id="page" data-role="page" class="type-interior ui-page-theme-h">
</div>
</body>

<template name="transcriptsMainLayout">k
  {{> header}}
  <main>
    {{>Template.dynamic template=content}}
  </main>
  {{> footer}}
</template>

<template name="header">
  <div data-role="header" data-theme="a"
       style="background: #004b87 url(images/header_bg.png) 50% top no-repeat; padding-top: 5px; padding-left: 5px">
    <img src="images/georgian-college-logo-2014.svg" alt="Georgian College" style='height:50px'>
  </div>
  <h2>Transcript Review</h2>
</template>

<template name="footer">
  <div data-role="footer" data-position="fixed">
    <div data-role="navbar">
      <ul>
        <li><a href="#" data-icon="gear" class="ui-btn-active ui-state-persist">Button 1</a>
        </li>
        <li><a href="#" data-icon="refresh">Button 2</a>
        </li>
        <li><a href="#" data-icon="check">Button 3</a>
        </li>
        <li><a href="#" data-icon="check">Button 4</a>
        </li>
      </ul>
    </div>
  </div>
</template>

<template name="login">
  {{> loginButtons}}
</template>

<template name="transcriptList">
  {{#if Template.subscriptionsReady}}
    <div data-role="collapsible-set">
      {{#each transcripts}}
        {{> transcriptSummary}}
      {{/each}}
    </div>
  {{else}}
    <p>Loading...</p>
  {{/if}}
</template>

<template name="transcriptSummary">
  {{#let
  transmissionData=pescCollegeTranscript.CollegeTranscript.TransmissionData
  person=pescCollegeTranscript.CollegeTranscript.Student.Person
  }}
    <div data-role="collapsible" data-theme="c" class="{{#unless awaitingReview}}not-reviewable{{/unless}} {{#if reviewerIsMe}}reviewer-is-me{{/if}}">
      <h2>
        {{title}} {{fullName}} - {{person.AgencyAssignedID}} ({{transmissionData.Source.Organization.OrganizationName}} created {{transmissionData.CreatedDateTime}})
        <span class="ui-collapsible-heading-status"> click to expand contents</span>
      </h2>
      {{#each academicRecords}}
        {{#if AcademicAward}}
          {{> academicAward award=AcademicAward}}
        {{/if}}
      {{/each}}
      <a data-role="button"
         data-icon="grid"
         data-theme="h"
         data-inline="true"
         role="button"
         href="{{pathForTranscriptReview}}"
         class="view-transcript {{#unless reviewable}}hide{{/unless}}">View Transcript</a>
    </div>
  {{/let}}
</template>

<template name="transcriptDetail">
  {{#with transcript}}
  <div>
    <a data-role="button"
       data-icon="check"
       data-theme="h"
       data-inline="true"
       role="button"
       class="review-complete">Transcript Review Complete</a>
    <a data-role="button"
       data-icon="cross"
       data-theme="h"
       data-inline="true"
       role="button"
       class="cancel-review">Cancel Review</a>

    <p>{{transcript.transcriptDump}}</p>
    <a data-role="button"
       data-icon="check"
       data-theme="h"
       data-inline="true"
       role="button"
       class="review-complete">Transcript Review Complete</a>
    <a data-role="button"
       data-icon="cross"
       data-theme="h"
       data-inline="true"
       role="button"
       class="cancel-review">Cancel Review</a>
  </div>
  {{/with}}
</template>

<template name="academicAward">
  <ul data-role="listview" data-divider-theme="h" class="ui-listview">
    <li data-role="list-divider" role="heading" class="ui-li ui-li-divider {{#if award.AcademicCompletionIndicator}}award-completed{{/if}}">
      {{award.AcademicAwardTitle}} level {{award.AcademicAwardLevel}} awarded on {{award.AcademicAwardDate}}
    </li>
    <li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r"
        data-iconpos="right">
      <div class="ui-grid-a my-breakpoint">
        <div class="ui-block-a">
          {{#if award.AcademicHonors}}
            <h4 class="ui-li-heading">Honors</h4>
            <p class="ui-li-desc">{{award.AcademicHonors.HonorsLevel}} {{award.AcademicHonors.HonorsTitle}}</p>
          {{/if}}
        </div>
        <div class="ui-block-b">
          <h4 class="ui-li-heading">Program</h4>
          <p class="ui-li-desc">
            <strong>{{award.AcademicAwardProgram.AcademicProgramName}} ({{award.AcademicAwardProgram.AcademicProgramType}})</strong>
          </p>
        </div>
      </div>
    </li>
  </ul>
</template>

<!--<template name="popupTranscript">-->
<!--<div class="popupTranscript">-->
    <!--{{#if currentTranscript}}-->
<!--{{>transcriptDetail}}-->
    <!--{{/if}}-->
<!--<iframe src="{{selectedTranscript.url}}"></iframe>-->
<!--</div>-->
<!--</template>-->

